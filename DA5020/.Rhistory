install.packages("tidyverse")
library(ggplot2)
library(dplyr)
summary(msleep)
head(msleep)
msleep %>%
drop_na() %>%
ggplot() +
geom_bar( mapping = aes( x = vore, y = ..count../sum(..count..)*100, fill = vore)) +
ylab("Percentage (%)")
library(tidyverse)
msleep %>%
drop_na() %>%
ggplot() +
geom_bar( mapping = aes( x = vore, y = ..count../sum(..count..)*100, fill = vore)) +
ylab("Percentage (%)")
msleep %>%
select(vore) %>%
drop_na() %>%
ggplot() +
geom_bar( mapping = aes( x = vore, y = ..count../sum(..count..)*100, fill = vore)) +
ylab("Percentage (%)")
msleep %>%
filter(vore == 'carni' | vore == 'herbi') %>%
group_by( vore) %>%
summarise( total_sleep_mean = mean(sleep_total))
ggplot( data = msleep, mapping = aes(x = bodywt, y = brainwt), na.rm = T) +
geom_point( na.rm = T) +
coord_trans(x = "log10", y = "log10")
cor(msleep$brainwt, msleep$bodywt, use = "pairwise.complete.obs", method="pearson")
msleep %>%
mutate( z = (sleep_total - mean(sleep_total))/sd(sleep_total)) %>%
filter( abs(z) > 1.5) %>%
select( name, z)
tripdata_df <- read_csv("https://s3.amazonaws.com/nyc-tlc/trip+data/green_tripdata_2020-02.csv")
tripdata_df <- read_csv("https://s3.amazonaws.com/nyc-tlc/trip+data/green_tripdata_2020-02.csv")
library(tidyverse)
tripdata_df <- read_csv("https://s3.amazonaws.com/nyc-tlc/trip+data/green_tripdata_2020-02.csv")
colnames(tripdata_df)
sum(!is.na(tripdata_df$ehail_fee))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
tripdata_df <- read_csv("https://s3.amazonaws.com/nyc-tlc/trip+data/green_tripdata_2020-02.csv")
print("Dimensions of trip dataset:")
dim(tripdata_df)
print("Missing values percentage in each variable:")
tripdata_df_missing <- sapply(tripdata_df, function(x) sum( is.na(x))) / dim(tripdata_df)[1]
tibble( names = names(tripdata_df_missing), missing_freq = tripdata_df_missing) %>%
ggplot() +
geom_bar( mapping = aes( x = names, y = missing_freq),
stat = "identity") +
coord_flip()
tripdata_df %>%
mutate( pick_up_month = format( as.Date( lpep_pickup_datetime), "%Y-%b")) %>%
mutate( drop_off_month = format( as.Date( lpep_dropoff_datetime), "%Y-%b")) %>%
filter( drop_off_month != "2020-Feb" & pick_up_month != "2020-Feb")
tripdata_df %>%
pull( RatecodeID) %>%
unique()
tripdata_df %>%
filter( 0 > total_amount) %>%
select( VendorID, passenger_count, total_amount)
sum(!is.na(tripdata_df$ehail_fee))
tripdata_df %>%
select( trip_distance) %>%
drop_na() %>%
ggplot() +
geom_histogram( mapping = aes( trip_distance))
sort( tripdata_df$trip_distance, decreasing = TRUE) [1:20]
tripdata_df %>%
select( trip_distance) %>%
drop_na() %>%
ggplot() +
geom_histogram( mapping = aes( log10(trip_distance)))
tripdata_outliers <- tripdata_df %>%
mutate( z = ((tip_amount - mean(tip_amount)) / sd(tip_amount))) %>%
filter( abs(z) > 3)
tripdata_tip_clean <- tripdata_df %>%
mutate( z = ((tip_amount - mean(tip_amount)) / sd(tip_amount))) %>%
filter( abs(z) <= 3)
tripdata_tip_clean
payment_type_dict = c("Credit Card", "Cash", "No Charge", "Dispute", "Unknown", "Voided Trip")
tripdata_tip_clean %>%
mutate( payment_type_str = sapply(tripdata_tip_clean $payment_type,
function(i) payment_type_dict[i])) %>%
select( payment_type_str, tip_amount) %>%
drop_na() %>%
ggplot( ) +
geom_boxplot( mapping = aes( y = tip_amount, x = payment_type_str,
fill = payment_type_str)) +
labs( x = "Payment Method", y = "Tips Amount (dollors)",
title = "Boxplot of Tips Amount verses Payment Method for Taxi.")
ggplot(data = tripdata_df) +
geom_bar( sort( trip_distance, decreasing = TRUE)[1:5000], stat="identity")
tripdata_df %>%
select( trip_distance) %>%
drop_na() %>%
ggplot() +
geom_histogram( mapping = aes( trip_distance[1:5000]))
tripdata_df %>%
select( trip_distance) %>%
drop_na() %>%
ggplot() +
geom_histogram( mapping = aes( trip_distance))
tripdata_df %>%
select( trip_distance) %>%
drop_na() %>%
sort( decreasing = TRUE)
tripdata_df %>%
select( trip_distance) %>%
drop_na() %>%
sort( decreasing = TRUE) %>%
ggplot() +
geom_histogram( mapping = aes( trip_distance[500:len(trip_distance)]))
tripdata_df %>%
select( trip_distance) %>%
drop_na() %>%
sort( decreasing = TRUE)[500:len(trip_distance)] %>%
ggplot() +
geom_histogram( mapping = aes( trip_distance))
tripdata_df %>%
pull( trip_distance) %>%
drop_na() %>%
sort( decreasing = TRUE)[500:len(trip_distance)] %>%
ggplot() +
geom_histogram( mapping = aes( trip_distance))
tripdata_df %>%
pull( trip_distance) %>%
sort( decreasing = TRUE)[500:len(trip_distance)] %>%
ggplot() +
geom_histogram( mapping = aes( trip_distance))
tripdata_df %>%
pull( trip_distance) %>%
sort( trip_distance, decreasing = TRUE)[500:len(trip_distance)] %>%
ggplot() +
geom_histogram( mapping = aes( trip_distance))
tripdata_df %>%
select( trip_distance) %>%
sort( trip_distance, decreasing = TRUE)[500:len(trip_distance)] %>%
ggplot() +
geom_histogram( mapping = aes( trip_distance))
tripdata_df %>%
select( trip_distance) %>%
sort( trip_distance, decreasing = TRUE)
tripdata_df %>%
select( trip_distance) %>%
sort( decreasing = TRUE)
tripdata_df %>%
pull( trip_distance) %>%
sort( decreasing = TRUE)
tripdata_df %>%
pull( trip_distance) %>%
sort( decreasing = TRUE)[500:len(trip_distance)] %>%
ggplot() +
geom_histogram( mapping = aes( trip_distance))
tripdata_df %>%
pull( trip_distance) %>%
sort( decreasing = TRUE) [1:2]
trip_distance_clean <- tripdata_df %>%
pull( trip_distance) %>%
sort( decreasing = TRUE)
ggplot( data = trip_distance_clean) %>%
geom_bar( trip_distance_clean, stat = "identity")
ggplot( data = trip_distance_clean) +
geom_bar( trip_distance_clean, stat = "identity")
ggplot( data = trip_distance_clean) +
geom_bar( trip_distance_clean, stat = "identity")
ggplot( data = trip_distance_clean) +
geom_bar( trip_distance_clean, stat = "identity")
trip_distance_clean <- tripdata_df %>%
select( trip_distance) %>%
sort( decreasing = TRUE)
trip_distance_clean <- tripdata_df %>%
select( trip_distance) %>%
sort( trip_distance, decreasing = TRUE)
trip_distance_clean <- tripdata_df %>%
select( trip_distance) %>%
sort( as.numeric(trip_distance), decreasing = TRUE)
trip_distance_clean <- tripdata_df %>%
mutate( trip_distance_sorted = sort(trip_distance, decreasing = TRUE)) %>%
ggplot( data = trip_distance_clean) +
geom_bar( trip_distance_clean[500:5000], stat="identity")
trip_distance_clean <- tripdata_df %>%
mutate( trip_distance_sorted = sort(trip_distance, decreasing = TRUE)) %>%
ggplot( data = trip_distance_clean) +
geom_bar( mapping=aes(trip_distance_clean[500:5000], stat="identity"))
trip_distance_clean <- tripdata_df %>%
mutate( trip_distance_sorted = sort(trip_distance, decreasing = TRUE)) %>%
ggplot( data = trip_distance_clean) +
geom_bar( mapping=aes(trip_distance_clean[500:5000], stat="identity"))
trip_distance_clean <- tripdata_df %>%
mutate( trip_distance_sorted = sort(trip_distance, decreasing = TRUE)) %>%
ggplot( data = trip_distance_clean) +
geom_bar( mapping = aes(trip_distance_clean[500:5000], stat="identity"))
trip_distance_clean <- tripdata_df %>%
mutate( trip_distance_sorted = sort(trip_distance, decreasing = TRUE)) %>%
ggplot( data = trip_distance_clean) +
geom_bar( mapping = aes(trip_distance_clean, stat="identity"))
trip_distance_clean <- tripdata_df %>%
mutate( trip_distance_sorted = sort(trip_distance, decreasing = TRUE)) %>%
ggplot( ) +
geom_bar( mapping = aes(trip_distance_clean, stat="identity"))
trip_distance_clean <- tripdata_df %>%
mutate( trip_distance_sorted = sort(trip_distance, decreasing = TRUE)) %>%
ggplot( ) +
geom_bar( mapping = aes(trip_distance_clean), stat="identity")
sort( tripdata_df$trip_distance, decreasing = TRUE) [1:20]
tripdata_df %>%
select( trip_distance) %>%
drop_na() %>%
ggplot() +
geom_histogram( mapping = aes( log10(trip_distance)))
trip_distance_clean <- tripdata_df %>%
mutate( trip_distance_sorted = sort(trip_distance, decreasing = TRUE)) %>%
ggplot( ) +
geom_bar( mapping = aes(trip_distance_clean), stat="identity")
tripdata_df %>%
mutate( trip_distance_sorted = sort(trip_distance, decreasing = TRUE)) %>%
ggplot( ) +
geom_bar( mapping = aes(trip_distance_clean), stat="identity")
tripdata_df %>%
mutate( trip_distance_sorted = sort(trip_distance, decreasing = TRUE)) %>%
ggplot( ) +
geom_bar( mapping = aes(trip_distance_sorted), stat="identity")
tripdata_df %>%
mutate( trip_distance_sorted = sort(trip_distance, decreasing = TRUE)) %>%
ggplot( ) +
geom_bar( mapping = aes( y = trip_distance_sorted), stat="identity")
tripdata_df %>%
mutate( trip_distance_sorted = sort(trip_distance, decreasing = TRUE)) %>%
select( trip_distance_sorted) %>%
ggplot( ) +
geom_bar( mapping = aes( y = trip_distance_sorted), stat="identity")
tripdata_df %>%
mutate( trip_distance_sorted = sort(trip_distance, decreasing = TRUE)) %>%
select( trip_distance_sorted) %>%
ggplot( ) +
geom_bar( mapping = aes(trip_distance_sorted), stat="identity")
ggplot( data = trip_distance_clean) +
geom_bar( trip_distance_clean)
tripdata_df %>%
mutate( trip_distance_sorted = sort(trip_distance, decreasing = TRUE)) %>%
select( trip_distance_sorted) %>%
ggplot( ) +
geom_bar( mapping = aes(trip_distance_sorted))
tripdata_df %>%
mutate( trip_distance_sorted = sort(trip_distance, decreasing = TRUE)) %>%
select( trip_distance_sorted) %>%
ggplot( ) +
geom_histogram( mapping = aes(trip_distance_sorted))
tripdata_df %>%
mutate( trip_distance_sorted = sort(trip_distance, decreasing = TRUE)) %>%
select( trip_distance_sorted) %>%
ggplot( ) +
geom_histogram( mapping = aes(trip_distance_sorted[500:5000]))
tripdata_df %>%
mutate( z = (trip_distance - mean(trip_distance) / sd(trip_distance))) %>%
filter( abs(z) < 3) %>%
select( trip_distance) %>%
ggplot() +
geom_histogram( mapping = aes( trip_distance))
tripdata_df %>%
mutate( z = (trip_distance - mean(trip_distance) / sd(trip_distance))) %>%
filter( abs(z) < 3) %>%
select( trip_distance) %>%
ggplot() +
geom_histogram( mapping = aes( trip_distance))
tripdata_df %>%
mutate( z = (trip_distance - mean(trip_distance) / sd(trip_distance))) %>%
filter( abs(z) < 30) %>%
select( trip_distance) %>%
ggplot() +
geom_histogram( mapping = aes( trip_distance))
ï¼ŸkNN
?kNN
library(class)
?kNN
knn
?knn
a <- c(1,2)
b <- c(4,1)
dist(a, b)
x <- c( 4,6,2,4,2,3,4)
order(x)
x[order(x)]
